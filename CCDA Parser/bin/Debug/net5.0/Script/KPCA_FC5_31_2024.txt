BEGIN 
SET XACT_ABORT ON 
BEGIN TRANSACTION 
DECLARE @PatientId BIGINT,@MedicAIzePatientId INT,@CDWOrganizationId BIGINT,@ClinicId BIGINT,@FileName NVARCHAR(200),@APUID NVARCHAR(200),@ExternalMappingId NVARCHAR(200) ; 
SET @ExternalMappingId = '1' ;
SET @CDWOrganizationId= 3 ;
SET @FileName = 'D:/CCMG DLL's/170.315_b1_toc_inp_r11_sample1_v8.xml' ;
SET @MedicAIzePatientId = 0SET @APUID = 'NULL'

EXEC usp_SaveUpdatePatientOrganizationClinics @OutputClinicId = @ClinicId OUTPUT ,@ParamClinicName = 'Community Health and Hospitals',@ParamClinicAddress1 = '1002 Healthcare Drive ',@ParamClinicAddress2 = '',@ParamCity = 'Portland',@ParamState= 'OR',@ParamCountry = 'US',@ParamZIP = '97266',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState= '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'WP',@ParamNPI= '99999999',@ParamClinicWorkPhoneNumber = ' 555-555-1002',@ParamSectionDisplayName = '',@ParamSectionName = 'custodian',@ParamSectionChildName = 'assignedCustodian',@ParamSectionCode = '',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.4.6',@ParamSectionOId = '',@ParamSectionExtension = '',@ParamAPUID =  @APUID ;

EXEC usp_SaveUpdatePatientDemographics @OutputPatientId = @PatientId OUTPUT ,@ParamAPUID =  @APUID,@ParamCDWOrganizationId =  @CDWOrganizationId,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName =  @FileName,@ParamMedicAIzePatientId =  @MedicAIzePatientId,@ParamSectionName = 'recordTarget',@ParamSectionChildName = 'patientRole',@ParamAssigningAuthorityName = '',@ParamFirstName = 'Myra',@ParamMiddleName = '',@ParamLastName = 'Jones',@ParamPatientPrefix = '',@ParamAddress1 = '1357 Amber Drive',@ParamAddress2 = '',@ParamCity = 'Beaverton',@ParamCountry = 'US',@ParamState = 'OR',@ParamDOB = '1947-05-01 00:00:00',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherCountry = '',@ParamOtherState = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamOrganizationName = 'Community Health and Hospitals',@ParamMaritalStatus = 'Married',@ParamEthnicity = 'Not Hispanic or Latino',@ParamLanguageCommunication = 'eng',@ParamRace = 'White',@ParamGender = 'Female',@ParamZip = '97006',@ParamPrimaryHomeContactNo = '',@ParamMobilePlaceContactNo = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamFacilityCode = 'KPCA_FC',@ParamSSN = '',@ParamKMPI = '02D3FDC92F1CE9287CACFD3BE6F1947F',@ParamSectionExtension ='1',@ParamSectionRoot ='2.16.840.1.113883.4.6',@ParamSectionOId = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionCode = '',@ParamClinicID = @ClinicId ;

EXEC usp_SaveUpdateEmergencyContacts @ParamSectionName = 'participant',@ParamSectionChildName = 'associatedEntity',@ParamEmergencyContactType = 'PRS',@ParamPrefix = 'Mr.',@ParamEmergencyContactFirstName = 'Ralph',@ParamEmergencyContactMiddleName = '',@ParamEmergencyContactLastName = 'Jones',@ParamCity = 'Beaverton',@ParamState = 'OR',@ParamCountry = 'US',@ParamZip = '97006',@ParamStreetAddress1 = '1357 Amber Drive',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamHomeContactPhone = '',@ParamMobileContactPhone = '',@ParamEmergencyContactPhone = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamSectionCode = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '',@ParamSectionExtension = '',@ParamPatientId = @PatientID,@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdateEmergencyContacts @ParamSectionName = 'participant',@ParamSectionChildName = 'associatedEntity',@ParamEmergencyContactType = 'PRS',@ParamPrefix = 'Mr.',@ParamEmergencyContactFirstName = 'Frank',@ParamEmergencyContactMiddleName = '',@ParamEmergencyContactLastName = 'Jones',@ParamCity = 'Beaverton',@ParamState = 'OR',@ParamCountry = 'US',@ParamZip = '97006',@ParamStreetAddress1 = '1357 Amber Drive',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamHomeContactPhone = '',@ParamMobileContactPhone = '',@ParamEmergencyContactPhone = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamSectionCode = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '',@ParamSectionExtension = '',@ParamPatientId = @PatientID,@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientProvider @ParamSectionName = 'DocumentationOf',@ParamSectionChildName = 'performer',@ParamFirstName = 'Henry',@ParamMiddleName  = '',@ParamLastName = 'Seven',@ParamSufix = '',@ParamPhone = '+1-555-555-5000',@ParamCity = 'Portland',@ParamState = 'OR',@ParamCountry = 'US',@ParamPostalCode = '97266',@ParamStreetAddressLine1 = '1002 Healthcare Dr',@ParamStreetAddressLine2 = '',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = '',@ParamNPI = '',@ParamSectionCodeSystemName = '',@ParamSectionCode = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '208D00000X',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId ;

EXEC usp_SaveUpdatePatientEncounters @ParamSectionName = 'componentOf',@ParamSectionChildName = 'encompassingEncounter',@ParamStartDateTime = '2012-08-06 00:00:00',@ParamEndDateTime = '2012-08-13 00:00:00',@ParamEncounterDescription = 'Pnuemonia',@ParamLocation = '',@ParamPerformerName = 'Henry Seven',@ParamPatientVisitId = '2.16.840.1.113883.4.6',@ParamExternalProviderId = '2.16.840.1.113883.4.6',@ParamCode = '',@ParamSectionCode = '',@ParamSectionOId = '',@ParamSectionDisplayName = '',@ParamSectionExtension = '',@ParamSectionCodeSystemName = '',@ParamSectionRoot = '',@ParamAPUID =  @APUID,@ParamFileName = @FileName,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId ;

EXEC usp_SaveUpdatePatientAllergies  @ParamSectionName = 'ALLERGIES, ADVERSE REACTIONS, ALERTS',@ParamSectionChildName = 'section',@ParamStartdate = '2006-05-01 00:00:00',@ParamAllergen = 'Codeine',@ParamRXNORM = '2670',@ParamSubstance = '',@ParamAllergyTypeDescripition = 'Propensity to adverse reaction to drug',@ParamSeverity = '#severity2',@ParamProviderName = '',@ParamDescription = '',@ParamNote = '',@ParamStatus = 'completed',@ParamStatusCode = 'completed',@ParamSnomedCode = '419511003',@ParamSectionCode = '48765-2',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.6.1',@ParamSectionDisplayName = '',@ParamSectionCodeSystemName = '',@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientEncounterDiagnosis @ParamSectionName = 'ENCOUNTERS',@ParamSectionChildName = 'section',@ParamDiagnosis = '',@ParamDiagnosisDescription = '',@ParamSnomedCode = '409586006',@ParamDisplayName = 'Complaint',@ParamStatusCode = 'completed',@ParamICD10 = '233604007',@ParamCPT4Code = '99222',@ParamCPT4DisplayName = 'InPatient Admission',@ParamStartDate = '8/6/2012 12:00:00 AM',@ParamEndDate = '',@ParamTypeCode = 'SUBJ',@ParamSectionCode = '46240-8',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'History of encounters',@ParamSectionExtension = '',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.22.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientImmunizations @ParamSectionName = 'IMMUNIZATIONS',@ParamSectionChildName = 'section',@ParamVaccineDate = '2012-05-10',@ParamCvxCode = '88',@ParamAdministeredDose= '50',@ParamExternalOrganizationId = '',@ParamAdministeredDoseUnits = 'mcg',@ParamVaccineLotNumber = '',@ParamVaccineStatus = '',@ParamPerformerName= '',@ParamSectionCode = '11369-6',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionDisplayName = 'History of immunizations',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.2.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientID,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientImmunizations @ParamSectionName = 'IMMUNIZATIONS',@ParamSectionChildName = 'section',@ParamVaccineDate = '2012-04-01',@ParamCvxCode = '106',@ParamAdministeredDose= '50',@ParamExternalOrganizationId = '',@ParamAdministeredDoseUnits = 'mcg',@ParamVaccineLotNumber = '',@ParamVaccineStatus = '',@ParamPerformerName= '',@ParamSectionCode = '11369-6',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionDisplayName = 'History of immunizations',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.2.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientID,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientMedication @ParamSectionName = 'Medications',@ParamSectionChildName = 'section',@ParamStartDate = '2012-08-06',@ParamEndDate = '',@ParamINSTRUCTIONS = '',@ParamMedication = '200 ACTUAT Albuterol 0.09 MG/ACTUAT Dry Powder Inhaler',@ParamStrength = '',@ParamDose = '',@ParamDoseValue = '0.09',@ParamDoseUnit = '',@ParamFrequency = '',@ParamGenericmed = '',@ParamProviderName = '',@ParamProviderFirstName = '',@ParamProviderMiddleName = '',@ParamProviderLastName = '',@ParamRxNorm = '',@ParamStatus= '',@ParamStatusCode= 'completed',@ParamSectionCode = '10160-0',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'HISTORY OF MEDICATION USE',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.1.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientDiagnosis @ParamSectionName = 'PROBLEMS',@ParamSectionChildName = 'section',@ParamDiagnosisDate = '',@ParamResolveDate = '',@ParamIsConfidential = 'false',@ParamComment = 'Pneumonia',@ParamStatus = 'completed',@ParamStatusCode = 'completed',@Paramicd10masterdiagnosisid = '',@ParamSnomedCode = '',@ParamProblem = '',@ParamSectionCode = '11450-4',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'PROBLEM LIST',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.5.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientProcedures @ParamSectionName = 'PROCEDURES',@ParamSectionChildName = 'section',@ParamStartDate = '2012-08-07 00:00:00',@ParamCPTCodes = '',@ParamDescription = 'Chest X-Ray',@ParamEndDate = '2012-08-07 00:00:00',@ParamPerformerId = '',@ParamPerformerName = '',@ParamStatus = 'completed',@ParamSectionCode = '47519-4',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'HISTORY OF PROCEDURES',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.7.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='10.2 g/dL',@ParamTestResult ='10.2',@ParamTestResultUnit ='g/dL',@ParamLonicCode ='30313-1',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='12.3 10*3/uL',@ParamTestResult ='12.3',@ParamTestResultUnit ='10*3/ul',@ParamLonicCode ='33765-9',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='123 10*3/uL',@ParamTestResult ='123',@ParamTestResultUnit ='10*3/ul',@ParamLonicCode ='26515-7',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientSocialHistory @ParamSectionName= 'SOCIAL HISTORY',@ParamSectionChildName= 'section',@ParamObsDate = '2005-05-01 00:00:00',@ParamDescription = 'Former smoker',@ParamCode = 'ASSERTION',@ParamStatusCode = 'completed',@ParamSectionCode = '29762-2',@ParamSectionDisplayName = 'Social History',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = '',@ParamSectionExtension= '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.17',@ParamExternalMappingId = @ExternalMappingId,@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientSocialHistory @ParamSectionName= 'SOCIAL HISTORY',@ParamSectionChildName= 'section',@ParamObsDate = '2005-05-01 00:00:00',@ParamDescription = '',@ParamCode = '230056004',@ParamStatusCode = 'completed',@ParamSectionCode = '29762-2',@ParamSectionDisplayName = 'Social History',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = '',@ParamSectionExtension= '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.17',@ParamExternalMappingId = @ExternalMappingId,@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientVitals @ParamSectionName = 'VITAL SIGNS',@ParamSectionChildName = 'section',@ParamVitalStartDate = '',@ParamVitalName = 'Nov 1, 2011',@ParamVitalValue = '175 ',@ParamVitalUnit = 'cm',@ParamStatusCode = 'completed',@ParamSnomedCode = '',@ParamSectionCode = '8716-3',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.4.1',@ParamSectionDisplayName = 'VITAL SIGNS',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

COMMIT Transaction 
END 

BEGIN 
SET XACT_ABORT ON 
BEGIN TRANSACTION 
DECLARE @PatientId BIGINT,@MedicAIzePatientId INT,@CDWOrganizationId BIGINT,@ClinicId BIGINT,@FileName NVARCHAR(200),@APUID NVARCHAR(200),@ExternalMappingId NVARCHAR(200) ; 
SET @ExternalMappingId = '1' ;
SET @CDWOrganizationId= 3 ;
SET @FileName = 'D:/CCMG DLL's/170.315_b1_toc_inp_r11_sample1_v8.xml' ;
SET @MedicAIzePatientId = 0SET @APUID = 'NULL'

EXEC usp_SaveUpdatePatientOrganizationClinics @OutputClinicId = @ClinicId OUTPUT ,@ParamClinicName = 'Community Health and Hospitals',@ParamClinicAddress1 = '1002 Healthcare Drive ',@ParamClinicAddress2 = '',@ParamCity = 'Portland',@ParamState= 'OR',@ParamCountry = 'US',@ParamZIP = '97266',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState= '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'WP',@ParamNPI= '99999999',@ParamClinicWorkPhoneNumber = ' 555-555-1002',@ParamSectionDisplayName = '',@ParamSectionName = 'custodian',@ParamSectionChildName = 'assignedCustodian',@ParamSectionCode = '',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.4.6',@ParamSectionOId = '',@ParamSectionExtension = '',@ParamAPUID =  @APUID ;

EXEC usp_SaveUpdatePatientDemographics @OutputPatientId = @PatientId OUTPUT ,@ParamAPUID =  @APUID,@ParamCDWOrganizationId =  @CDWOrganizationId,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName =  @FileName,@ParamMedicAIzePatientId =  @MedicAIzePatientId,@ParamSectionName = 'recordTarget',@ParamSectionChildName = 'patientRole',@ParamAssigningAuthorityName = '',@ParamFirstName = 'Myra',@ParamMiddleName = '',@ParamLastName = 'Jones',@ParamPatientPrefix = '',@ParamAddress1 = '1357 Amber Drive',@ParamAddress2 = '',@ParamCity = 'Beaverton',@ParamCountry = 'US',@ParamState = 'OR',@ParamDOB = '1947-05-01 00:00:00',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherCountry = '',@ParamOtherState = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamOrganizationName = 'Community Health and Hospitals',@ParamMaritalStatus = 'Married',@ParamEthnicity = 'Not Hispanic or Latino',@ParamLanguageCommunication = 'eng',@ParamRace = 'White',@ParamGender = 'Female',@ParamZip = '97006',@ParamPrimaryHomeContactNo = '',@ParamMobilePlaceContactNo = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamFacilityCode = 'KPCA_FC',@ParamSSN = '',@ParamKMPI = '02D3FDC92F1CE9287CACFD3BE6F1947F',@ParamSectionExtension ='1',@ParamSectionRoot ='2.16.840.1.113883.4.6',@ParamSectionOId = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionCode = '',@ParamClinicID = @ClinicId ;

EXEC usp_SaveUpdateEmergencyContacts @ParamSectionName = 'participant',@ParamSectionChildName = 'associatedEntity',@ParamEmergencyContactType = 'PRS',@ParamPrefix = 'Mr.',@ParamEmergencyContactFirstName = 'Ralph',@ParamEmergencyContactMiddleName = '',@ParamEmergencyContactLastName = 'Jones',@ParamCity = 'Beaverton',@ParamState = 'OR',@ParamCountry = 'US',@ParamZip = '97006',@ParamStreetAddress1 = '1357 Amber Drive',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamHomeContactPhone = '',@ParamMobileContactPhone = '',@ParamEmergencyContactPhone = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamSectionCode = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '',@ParamSectionExtension = '',@ParamPatientId = @PatientID,@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdateEmergencyContacts @ParamSectionName = 'participant',@ParamSectionChildName = 'associatedEntity',@ParamEmergencyContactType = 'PRS',@ParamPrefix = 'Mr.',@ParamEmergencyContactFirstName = 'Frank',@ParamEmergencyContactMiddleName = '',@ParamEmergencyContactLastName = 'Jones',@ParamCity = 'Beaverton',@ParamState = 'OR',@ParamCountry = 'US',@ParamZip = '97006',@ParamStreetAddress1 = '1357 Amber Drive',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = 'HP',@ParamHomeContactPhone = '',@ParamMobileContactPhone = '',@ParamEmergencyContactPhone = '',@ParamWorkPlaceContactNo = '',@ParamEmail = '',@ParamSectionCode = '',@ParamSectionCodeSystemName = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '',@ParamSectionExtension = '',@ParamPatientId = @PatientID,@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientProvider @ParamSectionName = 'DocumentationOf',@ParamSectionChildName = 'performer',@ParamFirstName = 'Henry',@ParamMiddleName  = '',@ParamLastName = 'Seven',@ParamSufix = '',@ParamPhone = '+1-555-555-5000',@ParamCity = 'Portland',@ParamState = 'OR',@ParamCountry = 'US',@ParamPostalCode = '97266',@ParamStreetAddressLine1 = '1002 Healthcare Dr',@ParamStreetAddressLine2 = '',@ParamOtherAddress1 = '',@ParamOtherAddress2 = '',@ParamOtherCity = '',@ParamOtherState = '',@ParamOtherCountry = '',@ParamOtherZip = '',@ParamAddressType = '',@ParamNPI = '',@ParamSectionCodeSystemName = '',@ParamSectionCode = '',@ParamSectionDisplayName = '',@ParamSectionRoot = '',@ParamSectionOID = '208D00000X',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId ;

EXEC usp_SaveUpdatePatientEncounters @ParamSectionName = 'componentOf',@ParamSectionChildName = 'encompassingEncounter',@ParamStartDateTime = '2012-08-06 00:00:00',@ParamEndDateTime = '2012-08-13 00:00:00',@ParamEncounterDescription = 'Pnuemonia',@ParamLocation = '',@ParamPerformerName = 'Henry Seven',@ParamPatientVisitId = '2.16.840.1.113883.4.6',@ParamExternalProviderId = '2.16.840.1.113883.4.6',@ParamCode = '',@ParamSectionCode = '',@ParamSectionOId = '',@ParamSectionDisplayName = '',@ParamSectionExtension = '',@ParamSectionCodeSystemName = '',@ParamSectionRoot = '',@ParamAPUID =  @APUID,@ParamFileName = @FileName,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId ;

EXEC usp_SaveUpdatePatientAllergies  @ParamSectionName = 'ALLERGIES, ADVERSE REACTIONS, ALERTS',@ParamSectionChildName = 'section',@ParamStartdate = '2006-05-01 00:00:00',@ParamAllergen = 'Codeine',@ParamRXNORM = '2670',@ParamSubstance = '',@ParamAllergyTypeDescripition = 'Propensity to adverse reaction to drug',@ParamSeverity = '#severity2',@ParamProviderName = '',@ParamDescription = '',@ParamNote = '',@ParamStatus = 'completed',@ParamStatusCode = 'completed',@ParamSnomedCode = '419511003',@ParamSectionCode = '48765-2',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.6.1',@ParamSectionDisplayName = '',@ParamSectionCodeSystemName = '',@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamExternalMappingId = @ExternalMappingId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientEncounterDiagnosis @ParamSectionName = 'ENCOUNTERS',@ParamSectionChildName = 'section',@ParamDiagnosis = '',@ParamDiagnosisDescription = '',@ParamSnomedCode = '409586006',@ParamDisplayName = 'Complaint',@ParamStatusCode = 'completed',@ParamICD10 = '233604007',@ParamCPT4Code = '99222',@ParamCPT4DisplayName = 'InPatient Admission',@ParamStartDate = '8/6/2012 12:00:00 AM',@ParamEndDate = '',@ParamTypeCode = 'SUBJ',@ParamSectionCode = '46240-8',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'History of encounters',@ParamSectionExtension = '',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.22.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientImmunizations @ParamSectionName = 'IMMUNIZATIONS',@ParamSectionChildName = 'section',@ParamVaccineDate = '2012-05-10',@ParamCvxCode = '88',@ParamAdministeredDose= '50',@ParamExternalOrganizationId = '',@ParamAdministeredDoseUnits = 'mcg',@ParamVaccineLotNumber = '',@ParamVaccineStatus = '',@ParamPerformerName= '',@ParamSectionCode = '11369-6',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionDisplayName = 'History of immunizations',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.2.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientID,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientImmunizations @ParamSectionName = 'IMMUNIZATIONS',@ParamSectionChildName = 'section',@ParamVaccineDate = '2012-04-01',@ParamCvxCode = '106',@ParamAdministeredDose= '50',@ParamExternalOrganizationId = '',@ParamAdministeredDoseUnits = 'mcg',@ParamVaccineLotNumber = '',@ParamVaccineStatus = '',@ParamPerformerName= '',@ParamSectionCode = '11369-6',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionDisplayName = 'History of immunizations',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.2.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientID,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientMedication @ParamSectionName = 'Medications',@ParamSectionChildName = 'section',@ParamStartDate = '2012-08-06',@ParamEndDate = '',@ParamINSTRUCTIONS = '',@ParamMedication = '200 ACTUAT Albuterol 0.09 MG/ACTUAT Dry Powder Inhaler',@ParamStrength = '',@ParamDose = '',@ParamDoseValue = '0.09',@ParamDoseUnit = '',@ParamFrequency = '',@ParamGenericmed = '',@ParamProviderName = '',@ParamProviderFirstName = '',@ParamProviderMiddleName = '',@ParamProviderLastName = '',@ParamRxNorm = '',@ParamStatus= '',@ParamStatusCode= 'completed',@ParamSectionCode = '10160-0',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'HISTORY OF MEDICATION USE',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.1.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientDiagnosis @ParamSectionName = 'PROBLEMS',@ParamSectionChildName = 'section',@ParamDiagnosisDate = '',@ParamResolveDate = '',@ParamIsConfidential = 'false',@ParamComment = 'Pneumonia',@ParamStatus = 'completed',@ParamStatusCode = 'completed',@Paramicd10masterdiagnosisid = '',@ParamSnomedCode = '',@ParamProblem = '',@ParamSectionCode = '11450-4',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'PROBLEM LIST',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.5.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientProcedures @ParamSectionName = 'PROCEDURES',@ParamSectionChildName = 'section',@ParamStartDate = '2012-08-07 00:00:00',@ParamCPTCodes = '',@ParamDescription = 'Chest X-Ray',@ParamEndDate = '2012-08-07 00:00:00',@ParamPerformerId = '',@ParamPerformerName = '',@ParamStatus = 'completed',@ParamSectionCode = '47519-4',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionDisplayName = 'HISTORY OF PROCEDURES',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionExtension = '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.7.1',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='10.2 g/dL',@ParamTestResult ='10.2',@ParamTestResultUnit ='g/dL',@ParamLonicCode ='30313-1',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='12.3 10*3/uL',@ParamTestResult ='12.3',@ParamTestResultUnit ='10*3/ul',@ParamLonicCode ='33765-9',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientLabTest @ParamSectionName = 'RESULTS',@ParamSectionChildName = 'section',@ParamOrderDate = '',@ParamTestStatus ='',@ParamTestName ='123 10*3/uL',@ParamTestResult ='123',@ParamTestResultUnit ='10*3/ul',@ParamLonicCode ='26515-7',@ParamSectionDisplayName ='RESULTS',@ParamSectionCodeSystemName ='LOINC',@ParamSectionCode ='30954-2',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.3.1',@ParamSectionOID = '2.16.840.1.113883.6.1',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientSocialHistory @ParamSectionName= 'SOCIAL HISTORY',@ParamSectionChildName= 'section',@ParamObsDate = '2005-05-01 00:00:00',@ParamDescription = 'Former smoker',@ParamCode = 'ASSERTION',@ParamStatusCode = 'completed',@ParamSectionCode = '29762-2',@ParamSectionDisplayName = 'Social History',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = '',@ParamSectionExtension= '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.17',@ParamExternalMappingId = @ExternalMappingId,@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientSocialHistory @ParamSectionName= 'SOCIAL HISTORY',@ParamSectionChildName= 'section',@ParamObsDate = '2005-05-01 00:00:00',@ParamDescription = '',@ParamCode = '230056004',@ParamStatusCode = 'completed',@ParamSectionCode = '29762-2',@ParamSectionDisplayName = 'Social History',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = '',@ParamSectionExtension= '',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.17',@ParamExternalMappingId = @ExternalMappingId,@ParamAPUID =  @APUID,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

EXEC usp_SaveUpdatePatientVitals @ParamSectionName = 'VITAL SIGNS',@ParamSectionChildName = 'section',@ParamVitalStartDate = '',@ParamVitalName = 'Nov 1, 2011',@ParamVitalValue = '175 ',@ParamVitalUnit = 'cm',@ParamStatusCode = 'completed',@ParamSnomedCode = '',@ParamSectionCode = '8716-3',@ParamSectionOId = '2.16.840.1.113883.6.1',@ParamSectionCodeSystemName = 'LOINC',@ParamSectionRoot = '2.16.840.1.113883.10.20.22.2.4.1',@ParamSectionDisplayName = 'VITAL SIGNS',@ParamSectionExtension = '',@ParamAPUID =  @APUID,@ParamExternalMappingId = @ExternalMappingId,@ParamPatientId = @PatientId,@ParamFileName = @FileName ;

COMMIT Transaction 
END 

